# Story 06.005: Step 3 - Placeholder Value Input

## User Story

As a business administrator using the GUI template processor,
I want to input values for each discovered placeholder in a clear, organized form,
So that I can provide the information I have available and proceed even with some placeholders unfilled.

## Story Context

**Existing System Integration:**
- Integrates with: Placeholder data from Step 2 (06.004), wizard navigation from 06.002
- Technology: Avalonia UI forms, ReactiveUI data binding, .NET 9
- Follows pattern: Wizard step navigation and data flow from previous steps
- Touch points: MainViewModel placeholder collection, form validation, JSON value mapping

## Acceptance Criteria

**Functional Requirements:**

1. **Dynamic Form Generation**
   - Create text input field for each placeholder discovered in Step 2
   - Display placeholder names as clear labels (e.g., "NÁZEV_FIRMY:", "DATUM_SMLOUVY:")
   - Maintain same order as Step 2 placeholder discovery list
   - Use standard Avalonia TextBox controls with proper data binding

2. **Value Input and Optional Completion**
   - Accept text input with automatic whitespace normalization (newlines, tabs, multiple spaces → single space)
   - Allow progression to next step regardless of completion status (no required fields)
   - Provide clear visual indication of filled vs. unfilled fields
   - Show warning indicator for unfilled fields (e.g., orange border or icon)
   - Support standard keyboard navigation (Tab between fields, Enter to advance)

3. **User Assistance and Warning Features**
   - "Vymazat vše" (Clear All) button to reset all input fields
   - Summary showing count of filled vs. unfilled placeholders (e.g., "5 of 8 placeholders filled")
   - Clear explanation that unfilled placeholders will remain as {{PLACEHOLDER}} in output
   - Visual distinction between filled (normal) and unfilled (warning style) fields

**Integration Requirements:**

4. Existing wizard navigation from 06.002 continues to work unchanged
5. Placeholder data from Step 2 (06.004) flows correctly into input form
6. Values collected create proper JSON mapping structure for CLI replace command (only includes filled placeholders)

**Quality Requirements:**

7. Form layout handles variable number of placeholders gracefully (scrolling if needed)
8. Visual feedback updates immediately as user types (filled/unfilled status)
9. "Back" button preserves entered values when returning from Step 4

## Technical Notes

- **Integration Approach:** Use ReactiveUI ObservableCollection for dynamic form generation with two-way binding
- **Existing Pattern Reference:** Follow MVVM patterns from 06.001 setup and visual feedback patterns from wizard framework 06.002
- **Key Constraints:** JSON mapping includes only filled placeholders; unfilled placeholders are excluded from replace operation

## Definition of Done

- [ ] Dynamic form generates input fields for all placeholders from Step 2
- [ ] All text inputs support whitespace normalization and visual feedback
- [ ] "Next" button is always enabled (no required field blocking)
- [ ] Unfilled fields display with clear visual warning (orange border/icon)
- [ ] Summary shows "X of Y placeholders filled" count
- [ ] Clear user explanation that unfilled placeholders remain as {{PLACEHOLDER}} in output
- [ ] "Vymazat vše" button clears all input fields and resets visual states
- [ ] "Back" button returns to Step 2 while preserving entered values
- [ ] Form layout handles 1-20+ placeholders with proper scrolling
- [ ] JSON mapping includes only filled placeholders (empty fields excluded)

## Risk and Compatibility Check

**Primary Risk:** User confusion about which placeholders will remain unfilled in output documents
**Mitigation:** Clear visual indicators, completion summary, and explicit warning about unfilled placeholders
**Rollback:** "Back" button allows return to Step 2, "Clear All" allows starting over with all fields

**Compatibility Verification:**

- [ ] No breaking changes to existing wizard step navigation
- [ ] Data binding follows established ReactiveUI patterns
- [ ] JSON output format matches CLI `replace` command requirements (partial replacement supported)
- [ ] CLI `replace` command handles partial placeholder maps correctly
- [ ] Performance remains responsive with 20+ input fields with visual feedback